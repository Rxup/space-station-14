- type: entity
  noSpawn: true
  parent: BaseBloodsuckerObjective
  id: BloodsuckerDrinkObjective
  name: BloodsuckerDrink
  description: BloodsuckerDrink
  components:
  - type: Objective
    icon:
      sprite: Backmen/Interface/Misc/antag_icon.rsi
      state: vampire
  - type: BloodsuckerDrinkCondition
    min: 400
    max: 800

- type: entity
  noSpawn: true
  parent: BaseBloodsuckerObjective
  id: BloodsuckerConvertObjective
  name: BloodsuckerConvert
  description: BloodsuckerConvert
  components:
  - type: Objective
    icon:
      sprite: Backmen/Interface/Misc/antag_icon.rsi
      state: vampire
  - type: BloodsuckerConvertCondition
    max: 5
    perPlayers: 10

- type: entity
  noSpawn: true
  parent: BaseBloodsuckerObjective
  id: EscapeShuttleObjectiveBloodsucker
  name: Сбегите в Центком живым и свободным.
  description: Ваша задача дождатся конца смены и сбежать на Центком, живым и свободным!
  components:
  - type: Objective
    difficulty: 1.3
    icon:
      sprite: Backmen/Interface/Misc/antag_icon.rsi
      state: vampire
  - type: EscapeShuttleCondition


- type: entity
  abstract: true
  parent: BaseObjective
  id: BaseBloodsuckerObjective
  components:
  - type: Objective
    issuer: Коалиция вампиров
    unique: true
    difficulty: 1
    icon:
      sprite: Structures/Furniture/chairs.rsi
      state: shuttle
  - type: RoleRequirement
    roles:
      components:
      - VampireRole

- type: antag
  id: Bloodsucker
  name: roles-antag-bloodsucker-name
  antagonist: true
  setPreference: true
  objective: roles-antag-bloodsucker-objective

- type: polymorph
  id: BVampieBat
  configuration:
    entity: MobBatRemilia
    revertOnCrit: true
    revertOnDeath: true
    transferName: true
    cooldown: 30
    delay: 5
    allowRepeatedMorphs: true
    revertOnEat: true

- type: entity
  name: bloodsucker medipen
  parent: ChemicalMedipen
  id: BloodsuckerMedipen
  description: Virus? And it's not a zombie...
  components:
  - type: Sprite
    sprite: Objects/Specific/Medical/medipen.rsi
    layers:
    - state: medipen
      map: ["enum.SolutionContainerLayers.Fill"]
  - type: SolutionContainerVisuals
    maxFillLevels: 1
    changeColor: true
    emptySpriteName: medipen_empty
  - type: SolutionContainerManager
    solutions:
      pen:
        maxVol: 20
        reagents:
        - ReagentId: BloodSuckerToxin
          Quantity: 15
        - ReagentId: SyntheticBlood
          Quantity: 5
  - type: Tag
    tags: []

- type: reagent
  id: BloodSuckerToxin
  name: reagent-name-bloodsucker-toxin
  group: Toxins
  desc: reagent-desc-bloodsucker-toxin
  physicalDesc: reagent-physical-desc-opaque
  flavor: bitter
  color: "#77b58e"
  plantMetabolism:
  - !type:PlantAdjustToxins
    amount: 10
  metabolisms:
    Poison:
      effects:
      - !type:ChemBloodSucker
        conditions:
        - !type:ReagentThreshold
          reagent: BloodSuckerToxin
          min: 10


- type: entity
  id: ActionConvertToVampier
  name: Make new bloodsucker
  noSpawn: true
  components:
  - type: EntityTargetAction
    icon:
      entity: DoorRemoteAIOpenClose
    event: !type:InnateNewVampierActionEvent
    useDelay: 120
    checkCanAccess: true
    checkCanInteract: true
    priority: -1
    range: 3
